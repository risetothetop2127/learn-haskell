<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>FactFibMemo</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_FactFibMemo.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/FactFibMemo.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">examples-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">FactFibMemo</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Factorial</a><ul><li><a href="#g:2">The Y-combinator</a></li></ul></li><li><a href="#g:3">Fibonacci</a></li><li><a href="#g:4">Memoization</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Z">Z</a> = <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></li><li class="src short"><a href="#v:errorNegative">errorNegative</a> :: a</li><li class="src short"><a href="#v:fact">fact</a> :: <a href="FactFibMemo.html#t:Z">Z</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a></li><li class="src short"><a href="#v:y">y</a> :: (t -&gt; t) -&gt; t</li><li class="src short"><a href="#v:fact-39-">fact'</a> :: (<a href="FactFibMemo.html#t:Z">Z</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a>) -&gt; <a href="FactFibMemo.html#t:Z">Z</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a></li><li class="src short"><a href="#v:yesToFact">yesToFact</a> :: <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:fib">fib</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a></li><li class="src short"><a href="#v:fib-39-">fib'</a> :: (<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a>) -&gt; <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a></li><li class="src short"><a href="#v:memo">memo</a> :: (<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; a) -&gt; <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; a</li><li class="src short"><a href="#v:yesToMemo">yesToMemo</a> :: <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Z" class="def">Z</a> = <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a> <a href="src/FactFibMemo.html#Z" class="link">Source</a> <a href="#t:Z" class="selflink">#</a></p><div class="doc"><p>A convenient abbreviation.</p></div></div><div class="top"><p class="src"><a id="v:errorNegative" class="def">errorNegative</a> :: a <a href="src/FactFibMemo.html#errorNegative" class="link">Source</a> <a href="#v:errorNegative" class="selflink">#</a></p><div class="doc"><p>An error we will use repeatedly.</p></div></div><h1 id="g:1">Factorial</h1><div class="top"><p class="src"><a id="v:fact" class="def">fact</a> :: <a href="FactFibMemo.html#t:Z">Z</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a> <a href="src/FactFibMemo.html#fact" class="link">Source</a> <a href="#v:fact" class="selflink">#</a></p><div class="doc"><p>Write the factorial function using explicit recursion. Your function should
 look something like this:</p><pre>fact n = ... fact ...</pre><p>Examples:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fact 5
</code></strong>120
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fact 10
</code></strong>3628800
</pre></div></div><h2 id="g:2">The Y-combinator</h2><div class="top"><p class="src"><a id="v:y" class="def">y</a> :: (t -&gt; t) -&gt; t <a href="src/FactFibMemo.html#y" class="link">Source</a> <a href="#v:y" class="selflink">#</a></p><div class="doc"><p>This is the Y-combinator. Here's the definition:</p><pre>y f = f (y f)</pre><p>A <em>combinator</em>, you will recall, is a point-free function.
 What is it good for? Read on!</p></div></div><div class="top"><p class="src"><a id="v:fact-39-" class="def">fact'</a> :: (<a href="FactFibMemo.html#t:Z">Z</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a>) -&gt; <a href="FactFibMemo.html#t:Z">Z</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a> <a href="src/FactFibMemo.html#fact%27" class="link">Source</a> <a href="#v:fact-39-" class="selflink">#</a></p><div class="doc"><p>Write <code>fact'</code>, a non-recursive version of <code>fact</code>, that takes an
 additional argument as the function to call when the recursion takes place.
 Your code will now look like this:</p><pre>fact' f n = ... f ...</pre><p>Now try your function with the Y-combinator:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(y fact') 6
</code></strong>720
</pre><p>Do you understand why this works? Try reducing <code>(y fact') 3</code> by hand.</p></div></div><div class="top"><p class="src"><a id="v:yesToFact" class="def">yesToFact</a> :: <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/FactFibMemo.html#yesToFact" class="link">Source</a> <a href="#v:yesToFact" class="selflink">#</a></p><div class="doc"><p>Just to check that you do understand what's going on:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>yesToFact
</code></strong>True
</pre></div></div><h1 id="g:3">Fibonacci</h1><div class="top"><p class="src"><a id="v:fib" class="def">fib</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a> <a href="src/FactFibMemo.html#fib" class="link">Source</a> <a href="#v:fib" class="selflink">#</a></p><div class="doc"><p>Fibonacci is notorious, in that it takes a long time to compute. Define
 <code><a href="FactFibMemo.html#v:fib">fib</a></code> using explicit recursion:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fib 6
</code></strong>8
</pre><p>Now try <code>mapM_ (print.fib) [0,10..40]</code>... you will wait a long time for 40!
 Be prepared to ^C.</p></div></div><div class="top"><p class="src"><a id="v:fib-39-" class="def">fib'</a> :: (<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a>) -&gt; <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="FactFibMemo.html#t:Z">Z</a> <a href="src/FactFibMemo.html#fib%27" class="link">Source</a> <a href="#v:fib-39-" class="selflink">#</a></p><div class="doc"><p>Let's do the same transformation we did for factorial:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(y fib') 6
</code></strong>8
</pre></div></div><h1 id="g:4">Memoization</h1><div class="top"><p class="src"><a id="v:memo" class="def">memo</a> :: (<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; a) -&gt; <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; a <a href="src/FactFibMemo.html#memo" class="link">Source</a> <a href="#v:memo" class="selflink">#</a></p><div class="doc"><p>Now we'll <em>memoize</em> this function. I'm going to give you the definition. If you copy this into the code itself, the example will work. The question is, do you understand why?
 It's not obvious. Work your way
 through it. I suggest reducing a small example by hand:</p><pre>(y (memo . fib')) 3</pre><p>Here's the definition:</p><pre>memo f = (map f [0..] !!)</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(y (memo . fib')) 6
</code></strong>8
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(y (memo . fib')) 100
</code></strong>354224848179261915075
</pre></div></div><div class="top"><p class="src"><a id="v:yesToMemo" class="def">yesToMemo</a> :: <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/FactFibMemo.html#yesToMemo" class="link">Source</a> <a href="#v:yesToMemo" class="selflink">#</a></p><div class="doc"><p>Just to check that you do understand what's going on:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>yesToMemo
</code></strong>True
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>